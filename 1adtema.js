/document.addEventListener("DOMContentLoaded",function(){if(!('speechSynthesis'in window)){alert("Your browser does not support Text-to-Speech!");return;}let playBtn=document.getElementById("play-voice");let pauseBtn=document.getElementById("pause-voice");let stopBtn=document.getElementById("stop-voice");let post=document.querySelector(".post-body");if(!playBtn||!pauseBtn||!stopBtn||!post){console.error("Required HTML elements not found!");return;}let speech=new SpeechSynthesisUtterance();let voices=[];let isPlaying=false;let isPaused=false;let isStopped=false;let textChunks=[];let chunkIndex=0;function loadVoices(){voices=speechSynthesis.getVoices();}if(speechSynthesis.onvoiceschanged!==undefined){speechSynthesis.onvoiceschanged=loadVoices;}function getArticleContent(){return post?post.innerText.trim():"";}function getPreferredVoice(lang){return(voices.find(v=>v.lang===lang&&v.name.toLowerCase().includes("female"))||voices.find(v=>v.lang===lang)||voices[0]);}
function splitTextIntoChunks(text){return text.match(/[^.!?]+[.!?]*/g)||[text];}
function speakText(){let content=getArticleContent();if(!content){alert("No content available to read!");return;}
let lang=document.documentElement.lang||"en-US";loadVoices();setTimeout(()=>{let preferredVoice=getPreferredVoice(lang);speech.voice=preferredVoice;speech.lang=lang;speech.rate=0.95;speech.pitch=1.0;speech.volume=1.0;textChunks=splitTextIntoChunks(content);chunkIndex=0;isPlaying=true;isStopped=false;playNextChunk();},100);}
function playNextChunk(){if(chunkIndex<textChunks.length&&isPlaying){speech.text=textChunks[chunkIndex];speech.onend=function(){chunkIndex++;playNextChunk();};speech.onerror=function(e){console.error("Speech Synthesis Error:",e);};speechSynthesis.speak(speech);}else{isPlaying=false;}}playBtn.addEventListener("click",function(){if(!isPlaying){speakText();}else if(isPaused){speechSynthesis.resume();isPaused=false;isPlaying=true;}});pauseBtn.addEventListener("click",function(){if(isPlaying&&!isPaused){speechSynthesis.pause();isPaused=true;isPlaying=false;}});stopBtn.addEventListener("click",function(){speechSynthesis.cancel();isPlaying=false;isPaused=false;isStopped=true;});document.addEventListener("visibilitychange",function(){if(document.hidden){speechSynthesis.cancel();isPlaying=false;isPaused=false;}});let currentDomain=window.location.hostname;let links=document.querySelectorAll("a");links.forEach(function(link){let href=link.getAttribute("href");if(href&&!href.includes(currentDomain)&&href.startsWith("http")){link.addEventListener("click",function(event){event.preventDefault();let confirmRedirect=confirm("This link will redirect you to an external site. Do you want to continue?");if(confirmRedirect){let redirectUrl="https://www.1ad.com.tr/p/redirect.html?url="+encodeURIComponent(href);window.open(redirectUrl,"_blank");}});}});});const rssFeed='/feeds/posts/default?alt=json';const noImage='https://raw.githubusercontent.com/dilekhamdiuludag/telef10payas.github.io/refs/heads/main/noimage.png';let currentIndex=0;let totalSlides=0;async function fetchPosts(){try{let response=await fetch(rssFeed);let data=await response.json();let posts=data.feed.entry;posts=shuffleArray(posts).slice(0,10);let slidesContainer=document.getElementById('slides');let paginationContainer=document.getElementById('pagination');slidesContainer.innerHTML='';paginationContainer.innerHTML='';totalSlides=posts.length;posts.forEach((post,index)=>{let title=post.title.$t;let content=post.content.$t;let link=post.link.find(l=>l.rel==='alternate').href;let imgMatch=content.match(/<img.*?src="(.*?)"/);let imgSrc=imgMatch?imgMatch[1]:noImage;let publishedDate=new Date(post.published.$t).toLocaleDateString('tr-TR');let author=post.author[0].name.$t;let slide=document.createElement('div');slide.className='slide';slide.innerHTML=`<a href="${link}"target="_self"><img src="${imgSrc}"alt="${title}"><div class="info"><span><i class="fas fa-user"></i>${author}</span>-<span><i class="fas fa-clock"></i>${publishedDate}</span></div><div class="caption"><i class="fas fa-newspaper"></i>${title}</div></a>`;slidesContainer.appendChild(slide);let pageThumbnail=document.createElement('div');pageThumbnail.onclick=()=>setSlide(index);pageThumbnail.innerHTML=`<img src="${imgSrc}"alt="${title}">`;paginationContainer.appendChild(pageThumbnail);});updatePagination();startAutoSlide();}catch(error){console.error('Haberleri yüklerken hata oluştu:',error);}}
function shuffleArray(array){for(let i=array.length-1;i>0;i--){let j=Math.floor(Math.random()*(i+1));[array[i],array[j]]=[array[j],array[i]];}
return array;}
function setSlide(index){currentIndex=index;document.querySelector('.slides').style.transform=`translateX(-${currentIndex*100}%)`;updatePagination();}
function updatePagination(){let thumbnails=document.querySelectorAll('.pagination div');thumbnails.forEach((thumb,i)=>{thumb.classList.toggle('active',i===currentIndex);});}
function startAutoSlide(){setInterval(()=>{currentIndex=(currentIndex+1)%totalSlides;setSlide(currentIndex);},3000);}
fetchPosts();document.addEventListener("DOMContentLoaded",function(){var postContent=document.querySelector('.post-body');if(!postContent)return;var headers=postContent.querySelectorAll("h2, h3, h4");if(headers.length===0)return;var tocContainer=document.getElementById("toc-container");if(!tocContainer)return;tocContainer.innerHTML=`<div id="toc-title"role="heading"aria-level="2">Table of Contents<button id="toc-toggle"class="hamburger-menu"aria-label="Toggle Table of Contents"><span class="bar"></span><span class="bar"></span><span class="bar"></span></button></div><nav aria-labelledby="toc-title"><ul id="toc-list"role="list"></ul></nav>`;var tocList=tocContainer.querySelector("#toc-list");var tocToggle=tocContainer.querySelector("#toc-toggle");headers.forEach((header,index)=>{var id="header-"+index;header.id=id;var listItem=document.createElement("li");listItem.innerHTML=`<a href="#${id}"class="toc-link">${header.innerText}</a>`;tocList.appendChild(listItem);});tocToggle.addEventListener("click",function(){if(tocList.style.display==="none"){tocList.style.display="block";tocList.style.animation="slideIn 0.5s ease-out";}else{tocList.style.animation="slideOut 0.5s ease-in";setTimeout(function(){tocList.style.display="none";},500);}});var tocLinks=tocContainer.querySelectorAll(".toc-link");tocLinks.forEach(function(link){link.addEventListener("click",function(event){event.preventDefault();var targetId=link.getAttribute("href").substring(1);var targetElement=document.getElementById(targetId);if(targetElement){window.scrollTo({top:targetElement.offsetTop-20,behavior:'smooth'});document.title=targetElement.innerText;history.pushState(null,null,"#"+targetId);}});});});const config={blogURL:"https://www.1ad.com.tr",labelDefault:"",showDate:true,orderBy:"updated"};document.addEventListener('DOMContentLoaded',()=>{const{blogURL,orderBy,showDate,labelDefault}=config;const selectLabel=document.getElementById("selectlabel");const daftarIsi=document.getElementById("daftar-isi");const fetchCategories=async()=>{try{const response=await fetch(`${blogURL}/feeds/posts/summary?alt=json&max-results=0`);if(!response.ok)throw new Error('Error fetching categories.');const data=await response.json();data.feed.category.forEach(category=>{const option=document.createElement("OPTION");option.value=encodeURIComponent(category.term);option.innerText=category.term;if(labelDefault===category.term)option.selected=true;selectLabel.appendChild(option);});fetchPosts(selectLabel.value);}catch(error){daftarIsi.innerHTML='<p style="color:red">Terjadi Error.</p>';}};const fetchPosts=async(label)=>{try{const response=await fetch(`${blogURL}/feeds/posts/summary/-/${label}?alt=json&max-results=10&orderby=${orderBy}`);const data=await response.json();displayPosts(data);}catch(error){daftarIsi.innerHTML='<p style="color:red">Terjadi Error.</p>';}};const displayPosts=(data)=>{const entries=data.feed.entry;if(!entries||entries.length===0){daftarIsi.innerHTML="<p>No posts.</p>";return;}
let postList="<ol>";entries.forEach(entry=>{const title=entry.title.$t;let formattedDate="";if(showDate){const updated=entry.updated.$t.split("T")[0].split("-");formattedDate=`${updated[2]}/${updated[1]}/${updated[0]}`;}
const link=entry.link.find(link=>link.rel==="alternate").href;postList+=`<li><strong><a href="${link}">${title}</a></strong>${showDate?`<span>(${formattedDate})</span>`:""}</li>`;});postList+="</ol>";daftarIsi.innerHTML=postList;};selectLabel.addEventListener("change",()=>fetchPosts(selectLabel.value));fetchCategories();});document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("mobile-footer-menu");function n(){return window.innerWidth<=768}if(!n()){e.style.display="none";return}let t=window.scrollY;window.addEventListener("scroll",function(){window.scrollY>t?e.style.bottom="-60px":e.style.bottom="0",t=window.scrollY})});/
